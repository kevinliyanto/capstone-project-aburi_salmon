# Diary

(this diary is written in Markdown, which can be previewed in VSCode by pressing Ctrl+Shift+V or GitHub repository)

Week | Plan | Doing
--|--|--
1 | Form a group and choose project. From this project, choose language and framework that will be used for the system | Formed a group with Sharon and Yemi. Also decided on what I'm going to work on (mainly frontend) and choosing language and frameworks to use. I decided to use TypeScript for both frontend and backend development since it is easier to debug and better to develop (statically typed). I already had a plan on what to use as framework too, where frontend is mainly done with React, NextJS and MaterialUI, and backend with Express + pgPromise + PassportJS. I started to work on architecture that we will have for the project proposal which is due in week 3. I prepared the repository for the backend and frontend so that it is easier for the rest of the team to develop the code.
2 | Wireframing. Architecture and database design. Finish the wireframe and project documentation. | Kaveh and Noah joined the group, and we decided on the development and scrum roles. Besides that, I also worked on the wireframe while designing the architecture of the project (what to use as framework and how they are going to work). We changed the backend to Python since most of us are comfortable with Python. I started setting up the project to python and adding some of the requirements based on the architecture. I also set up the Heroku postgres database.
3 | Finishing up the project documentation and started working on the frontend, try to understand how React - MaterialUI works | I tweaked the framework for a bit to suit the project needs, while finishing up the project documentation (specifically the system flow). I decided to remove NextJS and used create-react-app (CRA) with React router instead since it is easier to develop for a small, 10-page project. Using mainly StackOverflow, React documentation, and TypeScript type definitions, I managed to understand how component is loaded with their properties (props). I put some example on the frontend and backend code in order for the others to familiarize with the development ecosystem, including the way Flask-RESTX works (generating Swagger documentation).
4 | Integrate frontend requests to backend, and start working on customer menu and table selection page | I tried to integrate frontend with the backend with the current ecosystem. However, the frontend failed to do request due to CORS restriction. I tried modifying the packange by ejecting the create-react-app package but it didn't work out as intended. I used the http-proxy-middleware that create-react-app (CRA) has to redirect the request from frontend to backend without CORS issue. However, this didn't work out since there are some problems on the dependency that CRA (as I listed in https://github.com/facebook/create-react-app/issues/8653). I tried moving the project to JavaScript CRA. This turned out to work but the requests are working inconsistently. However, Noah found out a way to do the request without using proxy.
5 | Move back the project to TypeScript and continue working on menu page | After getting the typescript fetch working properly, I moved the frontend back to TypeScript. I started working on basic table page with two separate react components (left box and right bar), and put child component from the page itself in order to connect the two separate react components. The table number is automatically generated from what the backend generated (there is still no login for the anonymous user). Afterwards, I started on the menu page with the same concept as frontend, where there are two major components. Menu items and categories will go to the left box, and any control goes to the right bar. Also added a simple modal where item details go to the modal on this page.
6 | Add order list on the menu, fix modal styling. Fix modify order list to have cancel order in queue and confirm order, and start on waiting page | I added an order list on the menu page where the user can see items in queue. If clicked, this will show up the same modal as adding item, but user will modify the order instead of adding it to the current queue. I fixed some minor issue where quantity = 0 was possible to add by adding constraint on quantity and adding cancel order button. I found out the reason why styling of the modal was not working as intended, and it was because of the Grid API of Material-UI that takes a variable "xs" up to 12 (unlike the classic HTML grid). I decided to do confirm order as a modal later on since I still need to connect the customer login, hence I moved to waiting page, with the similar template to menu page. Used Table API for list of items, introduced modify order and cancel order based on item state, where modify order shows up the item itself and requests on that item-order. Adding item for waiting page will redirect the user to the previous menu page since it is hard to add item from waiting page alone.
7 | Add picture for each item (inside modal) and more fix on waiting page | Before modifying the frontend, I managed to modify the backend (and the database) to take another field on the item which takes url of a picture, where this picture corresponds to an item. This modification leads to some changes on the database interface on the backend and also the backend API endpoints, where url is an optional thing that gets returned when requested. Afterwards, I modified the frontend customer client to take url of the item and integrate it inside the item modal. Afterwards, I added a feature for the frontend staff side to take optional url picture when adding or modifying the item. I had some merge conflict when merging to the develop branch since Yemi also did some refactoring on the staff page, but it was easy to resolve. Also fixed waiting page to only have one button on item-order: modify order. User can cancel and modify order by clicking this button, where a modal shows up. This will avoid confusion for the customer.
8 | Add customer login, confirm order modal, and finalising the waiting page (request bill and notification) | I added customer login on the table selection page, with logout if there are no item in current order. Afterwards, I also added confirm order modal with table API to list current order. I also finalised the waiting page by adding request bill button. I had an assignment this week hence notification can't be finalised during this week. However, Kaveh is working on the backend and already added some feature of the notification on frontend, which I can include.
9 | Finishing notifications and logout of the customer, add estimated time on waiting page, fix bugs, and project demo preparation | I managed to finish notifications on request assistance and item-order state changes on waiting page. Afterwards, I added logout of the customer when the bill is paid by modifying the backend slightly (customer logout checks unpaid order, and staff changes the order paid status. This means the customer logout should only clear cookie of the frontend). After all changes on the backend is done, the customer is able to receive notification when the bill is paid, and automatically logged out on notification. I also modified the current order endpoint to return the estimated time of the order, so that the moment when there is a state change on the frontend, it will do a request to backend to get the estimated time of the remaining non-served items on the list. I also fixed the styling on the waiting page, where some buttons are out of order. Lastly, I prepared for the project demonstration.
10 | Wrapping things up and finish the project documentation | Worked on documentation, by adding information on the report regarding licensing of the product, and implementation challenges. I also added some documentation on setting up the project.
